<?xml version="1.0" encoding="UTF-8"?>
<tryton>
    <data>
        <record model="ir.action.act_window" id="health_nursing.action_gnuhealth_patient_rounding_view">
            <field name="active" eval="False" />
        </record>
        <record model="ir.ui.menu" id="health_nursing.menu_gnuhealth_patient_rounding_list">
            <field name="active" eval="False" />
        </record>

        <record model="ir.action.act_window" id="action_gnuhealth_patient_rounding_view">
            <field name="name">Ward Rounds</field>
            <field name="res_model">gnuhealth.patient.rounding</field>
        </record>

        <record model="ir.action.act_window" id="inpatient_tree_sequence_view">
            <field name="name">Tree Form Layout</field>
            <field name="res_model">gnuhealth.inpatient.registration</field>
        </record>

        <record model="ir.action.act_window.view" id="act_gnuhealth_patient_rounding_tree">
            <field name="sequence" eval="10"/>
            <field name="view" ref="health_nursing.gnuhealth_patient_rounding_tree"/>
            <field name="act_window" ref="action_gnuhealth_patient_rounding_view"/>
        </record>

        <record model="ir.action.act_window.view" id="act_gnuhealth_patient_rounding_form">
            <field name="sequence" eval="20"/>
            <field name="view" ref="health_nursing.gnuhealth_patient_rounding_view"/>
            <field name="act_window" ref="action_gnuhealth_patient_rounding_view"/>
        </record>
        
        <!-- Create a modified view for hospitalisation  -->
        <record model="ir.ui.view" id="form_inpatient_reg">
             <field name="model">gnuhealth.inpatient.registration</field>
             <field name="type">form</field>
             <field name="name">form-inpatient_registration</field>
        </record>
        <record model="ir.ui.view" id="tree_inpatient_reg">
             <field name="model">gnuhealth.inpatient.registration</field>
             <field name="type">tree</field>
             <field name="name">tree-inpatient_registration</field>
        </record>
        <record model="ir.ui.view" id="tree_inpatient_sequence">
             <field name="model">gnuhealth.inpatient.registration</field>
             <field name="type">tree</field>
             <field name="name">tree-inpatient_sequence</field>
        </record>
        <!-- Link the updated form to the original -->
        <record model="ir.action.act_window.view" id="health_inpatient.act_inpatient_registration_list_view">
            <field name="sequence" eval="10"/>
            <field name="view" ref="tree_inpatient_reg"/>
            <field name="act_window" ref="health_inpatient.gnuhealth_action_inpatient_registration"/>
        </record>
        <record model="ir.action.act_window.view" id="inpatient_tree_sequence">
            <field name="sequence" eval="20"/>
            <field name="view" ref="tree_inpatient_sequence"/>
            <field name="act_window" ref="health_inpatient.gnuhealth_action_inpatient_registration"/>
        </record>
        <record model="ir.action.act_window.view" id="health_inpatient.act_inpatient_registration_form_view">
            <field name="sequence" eval="20"/>
            <field name="view" ref="form_inpatient_reg"/>
            <field name="act_window" ref="health_inpatient.gnuhealth_action_inpatient_registration"/>
        </record>
        <!--Bed manager wizard. This wizard is used to 
            move beds from one place/ward in the hospital to the next-->
        <record model="ir.action.wizard" id="hospital_bed_management">
            <field name="name">Bed Mover Wizard</field>
            <field name="wiz_name">health_jamaica_hospital.manage_beds</field>
        </record>
        <record model="ir.action.wizard" id="wiz-move_hospital_bed">
            <field name="name">Move Selected Beds</field>
            <field name="wiz_name">health_jamaica_hospital.manage_beds</field>
        </record>

        <record model="ir.ui.view" id="bed_management_view">
             <field name="model">health_jamaica_hospital.manage_beds.start</field>
             <field name="type">form</field>
             <field name="name">form-bed_management_start</field>
        </record>
        <record model="ir.action.keyword" id="actkw-hospital_bed_management">
            <field name="keyword">form_action</field>
            <field name="model">gnuhealth.hospital.bed,-1</field>
            <field name="action" ref="wiz-move_hospital_bed"/>
        </record>
        <!--Creating hospital bed creator wizard. This wizard is used to 
            multiple beds on a hospital ward-->
        <record model="ir.action.wizard" id="create_hospital_bed">
            <field name="name">Bed Creator</field>
            <field name="wiz_name">health_jamaica_hospital.create_beds</field>
            <field name="window" eval="True" />
        </record>

        <record model="ir.ui.view" id="create_bed_view">
             <field name="model">health_jamaica_hospital.create_beds.start</field>
             <field name="type">form</field>
             <field name="name">form-create_bed_start</field>
        </record>

        <!--This xml turns bed creator wizard into a configuration wizard-->
         <record model="ir.module.module.config_wizard.item"
            id="config_wizard_item_bed_creator">
            <field name="action" ref="create_hospital_bed"/>
        </record>

        <!-- extend hospital bed views -->
        <record model="ir.ui.view" id="healthjm_tree_hospital_bed">
            <field name="model">gnuhealth.hospital.bed</field>
            <field name="inherit" ref="health.gnuhealth_hospital_bed_tree" />
            <field name="name">tree-hospital_bed</field>
        </record>
        <record model="ir.ui.view" id="healthjm_form_hospital_bed">
            <field name="model">gnuhealth.hospital.bed</field>
            <field name="inherit" ref="health.gnuhealth_hospital_bed_view" />
            <field name="name">form-hospital_bed</field>
        </record>

        <!--Extending hospital ward fields-->
        <record model="ir.ui.view" id="healthjm_ward">
            <field name="model">gnuhealth.hospital.ward</field>
            <field name="inherit" ref="health.gnuhealth_hospital_ward_view"/>
            <field name="priority" eval="20" />
            <field name="type">form</field>
            <field name="name">form-hospital-ward</field>
        </record>
        <!--Menu item for patient rounding-->
        <menuitem action="action_gnuhealth_patient_rounding_view"
            id="menu_gnuhealth_patient_rounding_list" icon="gnuhealth-list"
            name="Ward Rounds" parent="health_nursing.gnuhealth_nursing_menu"
            sequence="2"/>
        <!--Menu item for hospitalizations. recreated from health_inpatien_view.xml-->
        <menuitem name="Hospitalizations" action="health_inpatient.gnuhealth_action_inpatient_registration"
            parent="health.gnuhealth_menu"
            id="health_inpatient.gnuhealth_inpatient_menu" sequence="20"
            icon="icon-hospital-patient"/>

        <!--Menu item for bed management wizard--><!-- 
        <menuitem action="hospital_bed_management" id="bedman" name="Bed Management"
            sequence="9" parent="health.gnuhealth_conf_institution_bed_add"/> -->
        <!--Menu item for bed creator wizard-->
        <menuitem action="create_hospital_bed" id="bedcreate" name="Bed Creator"
            sequence="5" parent="health.gnuhealth_conf_institution_bed_add"/>

        <!-- Act_window to launch at form first -->
        <record model="ir.action.act_window" id="actwin-inpatient_registration_formfirst">
            <field name="name">Inpatient Registration</field>
            <field name="res_model">gnuhealth.inpatient.registration</field>
            <field name="domain" eval="None"></field>
        </record>
        <record model="ir.action.act_window.view" id="actview_hospitalization_formfirst">
            <field name="view" ref="form_inpatient_reg" />
            <field name="act_window" ref="actwin-inpatient_registration_formfirst" />
            <field name="sequence" eval="10" />
        </record>

        <!-- Wizard that initialises Notification based on the encounter -->
        <record model="ir.action.wizard" id="actwiz_hospitalization_from_encounter">
            <field name="name">Inpatient Registration</field>
            <field name="wiz_name">gnuhealth.inpatient.from_encounter_wizard</field>
        </record>

    <!-- Form action assigned to Encounters that launches Notification -->
        <record model="ir.action.keyword" id="actkw_hospitalization_from_encounter">
            <field name="keyword">form_action</field>
            <field name="model">gnuhealth.encounter,-1</field>
            <field name="action" ref="actwiz_hospitalization_from_encounter"/>
        </record>

    </data>
</tryton>